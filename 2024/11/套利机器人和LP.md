# 套利和LP


## 套利机器人
套利，在传统的操作上，是根据不同利率之间的差来进行获利，例如银行A的利率是0.3%，银行B的利率是0.5%，就可以从A银行借入，存到B银行赚钱0.2%的利差。

在区块链的上的套利：
1. 跨平台套利
不同交易所，同一代币的价格是不同的。例如BTC在币安是1元，在wigoSwap上是1.1元，就在币安买入，在wigoSwap上卖出。


2. 池内套利（单一平台）
同一平台上，不同交易池之间的价格差。例如FTM/USDT池中 1FTM = 1元，FTM/DAI池中 1FTM = 1.2元，机器人就在FTM/USDT池中买入，在FTM/DAI卖出。

3. 三角套利
涉及三种资产，利用三者之间的价格差完成套利。

FTM->USDT->DAI->FTM

每次交换都会导致小额利润，机器人完成循环后获的收益。


思路：
1. 使用DEX的价格API或者链上的价格预言机，获取资产的市场价格，并且判断目前资产在不同的市场是否有套利机会。
2. 利润 = （目标市场价格差 - 手续成本费 - 滑点成本） *  交易数量
手续费包括平台的交易手续费、链上gas费等。
滑点：交易价格因交易而改变的幅度。

3. 进行交易，从低平台买入，转入高平台，然后卖出。


关键点
1. 计算好成本，即有利可图
2. 大资金交易，利差很小，无大资金收益很慢
3. 尽可能使用复杂的交易路径，利用未被发现的利差



## LP
liquid provider,流动性提供者，就是在交易池中提供交易对，赚取手续费或者是代币奖励等。

收益 ≈ 手续费收入 + 代币奖励 + 代币价格变动收益 - 无常损失

### 风险
1. 无常损失（impermanent loss）
如果两种代币的价格波动大，流动池内的代币比例就会发生变化。与单独持有代币相比，可能面临一定的收益损失。
例如：ETH的价格涨了很多，你池中ETH减少（因为交易者买走了ETH），但USDT增加。最终可能你的ETH价值低于你单独持有的时候。
2. 智能合约风险
DEX的智能合约可能存在漏洞，资金可能被盗。
3. 市场波动和滑点风险
如果市场波动大，交易滑点增加，你的资金可能会被套利者利用（价格变动过大导致他们低买高卖）。







